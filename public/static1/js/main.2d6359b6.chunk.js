(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,r){e.exports=r(297)},152:function(e,t,r){},292:function(e,t){},297:function(e,t,r){"use strict";r.r(t);var n,a,o,i,c,l,u,s,m,f,b,p,h,d,O,y,v,j,E,g,C,N,R,w=r(0),k=r.n(w),I=r(9),B=r.n(I),A=r(12),S=r(15),x=r(18),T=r(17),M=r(19),_=(r(152),r(25)),W=r(14),L=r(11),D=(r(155),r(10)),z=r(31),P=r(33);function G(e){return void 0==e||null==e||""==e}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={};return t?(Object.keys(Object(P.a)({},e)).forEach(function(n){n!==t&&(r[n]=e[n])}),r):e}var U=(n=function e(t,r,n,u,s){Object(A.a)(this,e),Object(W.a)(this,"name",a,this),Object(W.a)(this,"username",o,this),Object(W.a)(this,"socket",i,this),Object(W.a)(this,"status",c,this),Object(W.a)(this,"chessman",l,this),this.name=t,this.username=r,this.socket=n,this.status=u,this.chessman=s},a=Object(L.a)(n.prototype,"name",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=Object(L.a)(n.prototype,"username",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=Object(L.a)(n.prototype,"socket",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(L.a)(n.prototype,"status",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=Object(L.a)(n.prototype,"chessman",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n),H=(u=function e(t,r,n,a,o,i){Object(A.a)(this,e),Object(W.a)(this,"id",s,this),Object(W.a)(this,"playerWhite",m,this),Object(W.a)(this,"playerBlack",f,this),Object(W.a)(this,"status",b,this),Object(W.a)(this,"currentChessman",p,this),Object(W.a)(this,"board",h,this),this.id=t,this.playerWhite=r,this.playerBlack=n,this.status=a,this.board=o,this.chessman=i},s=Object(L.a)(u.prototype,"id",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(L.a)(u.prototype,"playerWhite",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=Object(L.a)(u.prototype,"playerBlack",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=Object(L.a)(u.prototype,"status",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=Object(L.a)(u.prototype,"currentChessman",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=Object(L.a)(u.prototype,"board",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u),J=new(d=function(){function e(){Object(A.a)(this,e),Object(W.a)(this,"visibleModalName",O,this),Object(W.a)(this,"userStore",y,this),Object(W.a)(this,"roomsStore",v,this),Object(W.a)(this,"currentRoomId",j,this),Object(W.a)(this,"status",E,this),Object(W.a)(this,"result",g,this),Object(W.a)(this,"submitModalName",C,this),Object(W.a)(this,"updateRoom",N,this),Object(W.a)(this,"setCurrentRoom",R,this)}return Object(S.a)(e,[{key:"getCurrentRoom",get:function(){var e=this;return this.roomsStore.filter(function(t){return t.id==e.currentRoomId})[0]}},{key:"yourTurn",get:function(){var e=this.getCurrentRoom;return this.player.chessman==e.currentChessman}},{key:"partner",get:function(){var e=this.getCurrentRoom;return G(e)?null:e.playerBlack&&this.userStore.username==e.playerBlack.username?e.playerWhite:e.playerBlack}},{key:"player",get:function(){var e=this.getCurrentRoom;return G(e)?null:e.playerWhite&&this.userStore.username==e.playerWhite.username?e.playerWhite:e.playerBlack}}]),e}(),O=Object(L.a)(d.prototype,"visibleModalName",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=Object(L.a)(d.prototype,"userStore",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=Object(L.a)(d.prototype,"roomsStore",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=Object(L.a)(d.prototype,"currentRoomId",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=Object(L.a)(d.prototype,"status",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"choose room"}}),g=Object(L.a)(d.prototype,"result",[D.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(L.a)(d.prototype,"submitModalName",[D.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.visibleModalName=!1;var r=t.user;e.userStore=new U(r.name,r.username,r.socket,r.status,r.chessman),t.rooms.forEach(function(t){e.roomsStore.push(new H(t.id,t.playerWhite,t.playerBlack,t.status,t.board,t.currentChessman))})}}}),N=Object(L.a)(d.prototype,"updateRoom",[D.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.roomsStore=e.roomsStore.map(function(e){return e.id==t.id&&Object.keys(t).map(function(r){e[r]=t[r]}),e})}}}),R=Object(L.a)(d.prototype,"setCurrentRoom",[D.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.status="playing",e.currentRoomId=t.id}}}),Object(L.a)(d.prototype,"getCurrentRoom",[D.e],Object.getOwnPropertyDescriptor(d.prototype,"getCurrentRoom"),d.prototype),Object(L.a)(d.prototype,"yourTurn",[D.e],Object.getOwnPropertyDescriptor(d.prototype,"yourTurn"),d.prototype),Object(L.a)(d.prototype,"partner",[D.e],Object.getOwnPropertyDescriptor(d.prototype,"partner"),d.prototype),Object(L.a)(d.prototype,"player",[D.e],Object.getOwnPropertyDescriptor(d.prototype,"player"),d.prototype),d),F=r(302),Y=r(1),K=r.n(Y),q=r(301),X=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(x.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(a)))).handleSubmit=function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){e||r.props.onSubmit(t)})},r.getForm=function(){return r.props.form},r}return Object(M.a)(t,e),Object(S.a)(t,[{key:"getChildContext",value:function(){return{form:this.props.form}}},{key:"render",value:function(){return k.a.createElement(q.a,{onSubmit:this.handleSubmit},this.props.children)}}]),t}(w.Component);X.childContextTypes={form:K.a.object.isRequired};var $=q.a.create()(X),Q=function(){return function(e){var t=function(t){function r(e){return Object(A.a)(this,r),Object(x.a)(this,Object(T.a)(r).call(this,e))}return Object(M.a)(r,t),Object(S.a)(r,[{key:"render",value:function(){var t=this.context.form.getFieldDecorator,r=this.props,n=r.onChange,a=r.defaultValue,o=r.rules,i=r.name,c={};o&&(c.rules=o),n&&(c.onChange=n),a&&(c.initialValue=a);var l=V(this.props,"defaultValue");return k.a.createElement(q.a.Item,null,t(i,c)(k.a.createElement(e,l,this.props.children)))}}]),r}(w.Component);return t.contextTypes={form:K.a.object.isRequired},t}},Z=r(303),ee=Q()(Z.a),te=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(x.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(a)))).getValue=function(){return r.context.form.getFieldValue(r.props.name)},r.setValue=function(e){r.context.form.setFieldsValue(Object(z.a)({},r.props.name,e))},r.clear=function(){r.setValue("")},r.addSuffixClearValueToProps=function(e){var t=void 0===r.getValue()?e.defaultValue:r.getValue();return e=V(e,"suffixClear"),t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r&&n?(r=k.a.cloneElement(r,t),Object(P.a)({},e,Object(z.a)({},n,r))):e}(e,{onClick:function(){r.clear()}},r.props.suffix,"suffix"):V(e,"suffix")},r}return Object(M.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.suffixClear,r=e.suffix,n=Object(P.a)({},this.props);return t&&r&&(n=this.addSuffixClearValueToProps(n)),k.a.createElement(ee,n)}}]),t}(w.Component);te.contextTypes={form:K.a.object.isRequired};var re,ne,ae,oe=r(93),ie=function(e){function t(){return Object(A.a)(this,t),Object(x.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return k.a.createElement(q.a.Item,null,k.a.createElement(oe.a,this.props,this.props.children))}}]),t}(w.Component),ce=r(136),le=r.n(ce)()("/"),ue={CONNECTION:"connection",LOG_IN:"LOGIN",LOG_OUT:"disconnect",JOIN_ROOM:"JOIN_ROOM",READY_TO_PLAY:"READY_TO_PLAY",TICK:"TICK"},se={LOG_IN_SUCCESS:"LOG_IN_SUCCESS",JOINED_ROOM:"JOINED_ROOM",OUT_ROOM:"OUT_ROOM",UPDATE_ROOM:"UPDATE_ROOM",JOINED_GAME:"JOINED_GAME",UPDATE_BOARD:"UPDATE_BOARD",FINISH:"FINISH"},me={Board:{ROW:8,COL:8,Cell:{EMPTY:null,WHITE:1,BLACK:2}},Status:{EMPTY:0,AVAILABLE:1,PLAYING:2}},fe={Status:{ONLINE:"ONLINE",IN_ROOM:"IN_ROOM",PLAYING:"PLAYING"},GameResult:{WIN:"WIN",LOSE:"LOSE"}},be=se,pe=ue,he=Object(_.a)(re=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(x.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(a)))).submitModalName=function(e){le.emit(pe.LOG_IN,e),le.on(be.LOG_IN_SUCCESS,function(e){J.submitModalName(e)})},r}return Object(M.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return k.a.createElement(F.a,{title:"\u0110i\u1ec1n t\xean c\u1ee7a b\u1ea1n",visible:J.visibleModalName,footer:null,closable:!1},k.a.createElement($,{onSubmit:this.submitModalName},k.a.createElement(te,{name:"name",suffixClear:!0,placeholder:"Nh\u1eadp t\xean c\u1ee7a b\u1ea1n",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean c\u1ee7a b\u1ea1n!"}]}),k.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},k.a.createElement(ie,{type:"primary",htmlType:"submit"},"\u0110\u1ed3ng \xfd"))))}}]),t}(w.Component))||re,de=r(304),Oe=r(298),ye=r(299),ve=se,je=ue,Ee=Object(_.a)(ne=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(x.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(a)))).joinRoom=function(e){le.emit(je.JOIN_ROOM,{roomId:e.id})},r.countPlayer=function(e){var t=0;return G(e.playerWhite)||t++,G(e.playerBlack)||t++,t},r.renderRoom=function(e,t){var n=r.countPlayer(e);return k.a.createElement(Oe.a,{span:4,key:t},k.a.createElement("div",{className:"room",onClick:function(){2!=e.status&&r.joinRoom(e)}},k.a.createElement("div",{className:"room-empty "+"room-".concat(e.status,"-user")},k.a.createElement("div",{className:"text"},n,"/2")),k.a.createElement("div",{className:"room-name"},"Ph\xf2ng ",e.id)))},r}return Object(M.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){le.on(ve.UPDATE_ROOM,function(e){J.updateRoom(e)}),le.on(ve.JOINED_ROOM,function(e){J.updateRoom(e),J.setCurrentRoom(e)})}},{key:"render",value:function(){var e=this;return k.a.createElement("div",null,k.a.createElement(ye.a,{gutter:24},J.roomsStore.map(function(t,r){return e.renderRoom(t,r)})))}}]),t}(w.Component))||ne,ge=r(144);function Ce(e){return void 0===e}function Ne(e){return null==e}var Re=se,we=ue,ke=fe,Ie=me,Be=[-1,-1,-1,1,1,1,0,0],Ae=[-1,0,1,-1,0,1,-1,1];function Se(e,t,r,n,a,o,i){for(var c=0,l=n+o,u=a+i;;){if(!(0<=l&&l<8&&0<=u&&u<8))return!1;if(e[l][u]!=r){if(e[l][u]==t)break;return!1}c++,l+=o,u+=i}return c>0}function xe(e){var t=0,r=0;return e.forEach(function(e){e.forEach(function(e){e==Ie.Board.Cell.WHITE&&t++,e==Ie.Board.Cell.BLACK&&r++})}),r>t?Ie.Board.Cell.BLACK:r<t?Ie.Board.Cell.WHITE:0}var Te,Me=Object(_.a)(ae=function(e){function t(e){var r;return Object(A.a)(this,t),(r=Object(x.a)(this,Object(T.a)(t).call(this,e))).onClickCell=function(e,t,n){J.getCurrentRoom.board[e][t]=J.player.chessman,n.forEach(function(r){!function(e,t,r,n,a,o,i){for(var c=n+o,l=a+i;;){if(!(0<=c&&c<8&&0<=l&&l<8))return;if(e[c][l]!=r){if(e[c][l]==t)break;return}e[c][l]=t,c+=o,l+=i}}(J.getCurrentRoom.board,J.player.chessman,J.partner.chessman,e,t,r.xx,r.yy)}),r.updateBoard()},r.updateBoard=function(){le.emit(we.TICK,J.getCurrentRoom.board)},r.createFences=function(){for(var e=function e(t){if(!Ce(t))return Ne(t)?null:t.slice&&Array.isArray(t.slice())?t.map(function(t){return e(t)}):"object"===typeof t?Object.entries(t).reduce(function(t,r){var n=Object(ge.a)(r,2),a=n[0],o=n[1];return Object(P.a)({},t,Object(z.a)({},a,e(o)))},{}):t}(J.getCurrentRoom.board),t=0;t<8;t++)for(var r=0;r<8;r++)if(1==e[t][r]||2==e[t][r])for(var n=0;n<8;n++)0<=t+Be[n]&&t+Be[n]<8&&0<=r+Ae[n]&&r+Ae[n]<8&&!e[t+Be[n]][r+Ae[n]]&&(e[t+Be[n]][r+Ae[n]]=-1);return e},r.isAvailableMove=function(e,t,r){var n,a=new Array(8).fill(null).map(function(){return new Array(8)});n=1==r?2:1;for(var o=0;o<8;o++)for(var i=0;i<8;i++)if(-1==e[o][i])for(var c=0;c<8;c++){Se(t,r,n,o,i,Be[c],Ae[c])&&(e[o][i]=-2,void 0==a[o][i]&&(a[o][i]=[]),a[o][i].push({xx:Be[c],yy:Ae[c]}))}return a},r.renderWin=function(){return k.a.createElement(F.a,{title:"K\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u",visible:function(e){var t=!0;return e.forEach(function(e){e.forEach(function(e){G(e)&&(t=!1)})}),t}(J.getCurrentRoom.board)||J.result,footer:null,closable:!0,onCancel:function(){window.location.reload()}},k.a.createElement("div",{style:{fontSize:"30px",fontWeight:"bold"}},J.result==ke.GameResult.WIN||xe(J.getCurrentRoom.board)==J.player.chessman?"B\u1ea1n th\u1eafng":xe(J.getCurrentRoom.board)==J.partner.chessman?J.partner.name+" th\u1eafng":"H\xf2a"))},r.checkUpdateBoard=function(e){null!=r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(function(){!function(e){var t=!1;return e.forEach(function(e){e.forEach(function(e){-2==e&&(t=!0)})}),t}(e)&&J.yourTurn&&r.updateBoard()},500)},r.renderBoard=function(){var e=r.createFences(),t=r.isAvailableMove(e,J.getCurrentRoom.board,J.player.chessman);return r.checkUpdateBoard(e),k.a.createElement("div",{className:"board-game"},J.getCurrentRoom.board.map(function(e,n){return k.a.createElement("div",{className:"board-row",key:n},e.map(function(e,a){return k.a.createElement("div",{className:"cell-game "+(t[n][a]&&J.yourTurn?"":"not-allowed-cell"),key:a,onClick:function(){t[n][a]&&J.yourTurn&&r.onClickCell(n,a,t[n][a])}},e==Ie.Board.Cell.BLACK?k.a.createElement("div",{className:"dot-black"}):e==Ie.Board.Cell.WHITE?k.a.createElement("div",{className:"dot-white"}):k.a.createElement("div",{className:t[n][a]&&J.yourTurn?J.player.chessman==Ie.Board.Cell.BLACK?"hover-black":"hover-white":"not-allowed"}))}))}),r.renderWin())},r}return Object(M.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){le.on(Re.JOINED_GAME,function(e){J.updateRoom(e)}),le.on(Re.UPDATE_BOARD,function(e){J.updateRoom(e)}),le.on(Re.FINISH,function(e){J.result=e.result})}},{key:"render",value:function(){return J.getCurrentRoom.status==Ie.Status.PLAYING?this.renderBoard():k.a.createElement("div",{className:"waiting-partner"},"\u0110ang \u0111\u1ee3i \u0111\u1ed1i th\u1ee7...")}}]),t}(w.Component))||ae,_e=r(300),We=me;function Le(e,t){var r=0;return e.forEach(function(e){e.forEach(function(e){e==t&&r++})}),r}var De,ze=Object(_.a)(Te=function(e){function t(){return Object(A.a)(this,t),Object(x.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=J.userStore;return k.a.createElement("div",{style:{padding:"20px 5px",display:"flex",alignItems:"center",flexDirection:"column"}},k.a.createElement(_e.a,{size:100,icon:"user"}),k.a.createElement("div",{style:{marginTop:20}},"Xin ch\xe0o,"),k.a.createElement("div",{style:{fontWeight:"bold"}},e.name),k.a.createElement("div",{style:{color:"#989898"}},e.username),k.a.createElement("div",{style:{marginBottom:"20px"}}),J.player&&J.partner&&k.a.createElement("div",{className:"board-score"},J.player&&k.a.createElement("div",{style:{marginBottom:"30px"}},k.a.createElement("div",{className:"name"},"B\u1ea1n"),k.a.createElement("div",{className:"container-score"},k.a.createElement("div",{className:J.player.chessman==We.Board.Cell.WHITE?"dot-white":"dot-black"}),k.a.createElement("div",{className:"score"},"x ",Le(J.getCurrentRoom.board,J.player.chessman)))),J.partner&&k.a.createElement("div",{style:{marginBottom:"30px"}},k.a.createElement("div",{className:"name"},J.partner.name),k.a.createElement("div",{style:{color:"#ececec",textAlign:"center"}},J.partner.username),k.a.createElement("div",{className:"container-score"},k.a.createElement("div",{className:J.partner.chessman==We.Board.Cell.WHITE?"dot-white":"dot-black"}),k.a.createElement("div",{className:"score"},"x ",Le(J.getCurrentRoom.board,J.partner.chessman)))),J.yourTurn?k.a.createElement("div",{className:"name"},"L\u01b0\u1ee3t b\u1ea1n"):k.a.createElement("div",{className:"name"},"L\u01b0\u1ee3t \u0111\u1ed1i th\u1ee7")))}}]),t}(w.Component))||Te,Pe=de.a.Header,Ge=de.a.Sider,Ve=de.a.Content,Ue=Object(_.a)(De=function(e){function t(){return Object(A.a)(this,t),Object(x.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return k.a.createElement("div",null,k.a.createElement(he,null),k.a.createElement(de.a,{className:"layout"},k.a.createElement(Pe,null,k.a.createElement("div",{style:{color:"#fff",fontSize:"22px",fontWeight:"bold",textAlign:"center"}},"choose room"==J.status?"Ch\u1ecdn ph\xf2ng":"Ch\u01a1i")),k.a.createElement(de.a,null,k.a.createElement(Ge,{width:200,style:{background:"#fff"}},k.a.createElement(ze,null)),k.a.createElement(Ve,{style:{background:"#e2e2e2",padding:24,margin:0,minWidth:"800px",minHeight:"calc(100vh - 64px)"}},k.a.createElement("div",{style:{background:"#fff",width:"100%",height:"100%",padding:24,borderRadius:"10px",display:"flex",justifyContent:"center",alignItems:"center"}},"choose room"==J.status?k.a.createElement(Ee,null):k.a.createElement(Me,null))))))}}]),t}(w.Component))||De;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));B.a.render(k.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,2,1]]]);
//# sourceMappingURL=main.2d6359b6.chunk.js.map