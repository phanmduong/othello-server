(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,r){e.exports=r(297)},152:function(e,t,r){},292:function(e,t){},297:function(e,t,r){"use strict";r.r(t);var n,a,o,i,c,l,u,s,m,b,p,f,h,d,O,y,v,j,g,E,C,w,N,k=r(0),R=r.n(k),I=r(9),x=r.n(I),A=r(12),S=r(15),T=r(18),M=r(17),B=r(19),_=(r(152),r(25)),D=r(14),z=r(11),P=(r(155),r(10)),W=r(30),L=r(32);function V(e){return void 0==e||null==e||""==e}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={};return t?(Object.keys(Object(L.a)({},e)).forEach(function(n){n!==t&&(r[n]=e[n])}),r):e}var U=(n=function e(t,r,n,u,s){Object(A.a)(this,e),Object(D.a)(this,"name",a,this),Object(D.a)(this,"username",o,this),Object(D.a)(this,"socket",i,this),Object(D.a)(this,"status",c,this),Object(D.a)(this,"chessman",l,this),this.name=t,this.username=r,this.socket=n,this.status=u,this.chessman=s},a=Object(z.a)(n.prototype,"name",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=Object(z.a)(n.prototype,"username",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=Object(z.a)(n.prototype,"socket",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(z.a)(n.prototype,"status",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=Object(z.a)(n.prototype,"chessman",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n),J=(u=function e(t,r,n,a,o,i){Object(A.a)(this,e),Object(D.a)(this,"id",s,this),Object(D.a)(this,"playerWhite",m,this),Object(D.a)(this,"playerBlack",b,this),Object(D.a)(this,"status",p,this),Object(D.a)(this,"currentChessman",f,this),Object(D.a)(this,"board",h,this),this.id=t,this.playerWhite=r,this.playerBlack=n,this.status=a,this.board=o,this.chessman=i},s=Object(z.a)(u.prototype,"id",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(z.a)(u.prototype,"playerWhite",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=Object(z.a)(u.prototype,"playerBlack",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=Object(z.a)(u.prototype,"status",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=Object(z.a)(u.prototype,"currentChessman",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=Object(z.a)(u.prototype,"board",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u),F=new(d=function(){function e(){Object(A.a)(this,e),Object(D.a)(this,"visibleModalName",O,this),Object(D.a)(this,"userStore",y,this),Object(D.a)(this,"roomsStore",v,this),Object(D.a)(this,"currentRoomId",j,this),Object(D.a)(this,"status",g,this),Object(D.a)(this,"board",E,this),Object(D.a)(this,"submitModalName",C,this),Object(D.a)(this,"updateRoom",w,this),Object(D.a)(this,"setCurrentRoom",N,this)}return Object(S.a)(e,[{key:"getCurrentRoom",get:function(){var e=this;return this.roomsStore.filter(function(t){return t.id==e.currentRoomId})[0]}},{key:"yourTurn",get:function(){var e=this.getCurrentRoom;return this.player.chessman==e.currentChessman}},{key:"partner",get:function(){var e=this.getCurrentRoom;return V(e)?null:e.playerBlack&&this.userStore.username==e.playerBlack.username?e.playerWhite:e.playerBlack}},{key:"player",get:function(){var e=this.getCurrentRoom;return V(e)?null:e.playerWhite&&this.userStore.username==e.playerWhite.username?e.playerWhite:e.playerBlack}}]),e}(),O=Object(z.a)(d.prototype,"visibleModalName",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=Object(z.a)(d.prototype,"userStore",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=Object(z.a)(d.prototype,"roomsStore",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=Object(z.a)(d.prototype,"currentRoomId",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=Object(z.a)(d.prototype,"status",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"choose room"}}),E=Object(z.a)(d.prototype,"board",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(8).fill(null).map(function(){return new Array(8).fill(null)})}}),C=Object(z.a)(d.prototype,"submitModalName",[P.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.visibleModalName=!1;var r=t.user;e.userStore=new U(r.name,r.username,r.socket,r.status,r.chessman),t.rooms.forEach(function(t){e.roomsStore.push(new J(t.id,t.playerWhite,t.playerBlack,t.status,t.board,t.currentChessman))})}}}),w=Object(z.a)(d.prototype,"updateRoom",[P.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log(t),e.roomsStore=e.roomsStore.map(function(e){return e.id==t.id&&Object.keys(t).map(function(r){e[r]=t[r]}),e})}}}),N=Object(z.a)(d.prototype,"setCurrentRoom",[P.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.status="playing",e.currentRoomId=t.id}}}),Object(z.a)(d.prototype,"getCurrentRoom",[P.e],Object.getOwnPropertyDescriptor(d.prototype,"getCurrentRoom"),d.prototype),Object(z.a)(d.prototype,"yourTurn",[P.e],Object.getOwnPropertyDescriptor(d.prototype,"yourTurn"),d.prototype),Object(z.a)(d.prototype,"partner",[P.e],Object.getOwnPropertyDescriptor(d.prototype,"partner"),d.prototype),Object(z.a)(d.prototype,"player",[P.e],Object.getOwnPropertyDescriptor(d.prototype,"player"),d.prototype),d),H=r(302),Y=r(1),K=r.n(Y),q=r(301),X=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(T.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).handleSubmit=function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){e||r.props.onSubmit(t)})},r.getForm=function(){return r.props.form},r}return Object(B.a)(t,e),Object(S.a)(t,[{key:"getChildContext",value:function(){return{form:this.props.form}}},{key:"render",value:function(){return R.a.createElement(q.a,{onSubmit:this.handleSubmit},this.props.children)}}]),t}(k.Component);X.childContextTypes={form:K.a.object.isRequired};var $=q.a.create()(X),Q=function(){return function(e){var t=function(t){function r(e){return Object(A.a)(this,r),Object(T.a)(this,Object(M.a)(r).call(this,e))}return Object(B.a)(r,t),Object(S.a)(r,[{key:"render",value:function(){var t=this.context.form.getFieldDecorator,r=this.props,n=r.onChange,a=r.defaultValue,o=r.rules,i=r.name,c={};o&&(c.rules=o),n&&(c.onChange=n),a&&(c.initialValue=a);var l=G(this.props,"defaultValue");return R.a.createElement(q.a.Item,null,t(i,c)(R.a.createElement(e,l,this.props.children)))}}]),r}(k.Component);return t.contextTypes={form:K.a.object.isRequired},t}},Z=r(303),ee=Q()(Z.a),te=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(T.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).getValue=function(){return r.context.form.getFieldValue(r.props.name)},r.setValue=function(e){r.context.form.setFieldsValue(Object(W.a)({},r.props.name,e))},r.clear=function(){r.setValue("")},r.addSuffixClearValueToProps=function(e){var t=void 0===r.getValue()?e.defaultValue:r.getValue();return e=G(e,"suffixClear"),t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r&&n?(r=R.a.cloneElement(r,t),Object(L.a)({},e,Object(W.a)({},n,r))):e}(e,{onClick:function(){r.clear()}},r.props.suffix,"suffix"):G(e,"suffix")},r}return Object(B.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.suffixClear,r=e.suffix,n=Object(L.a)({},this.props);return t&&r&&(n=this.addSuffixClearValueToProps(n)),R.a.createElement(ee,n)}}]),t}(k.Component);te.contextTypes={form:K.a.object.isRequired};var re,ne,ae,oe=r(93),ie=function(e){function t(){return Object(A.a)(this,t),Object(T.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return R.a.createElement(q.a.Item,null,R.a.createElement(oe.a,this.props,this.props.children))}}]),t}(k.Component),ce=r(136),le=r.n(ce)()("/"),ue={CONNECTION:"connection",LOG_IN:"LOGIN",LOG_OUT:"disconnect",JOIN_ROOM:"JOIN_ROOM",READY_TO_PLAY:"READY_TO_PLAY",TICK:"TICK"},se={LOG_IN_SUCCESS:"LOG_IN_SUCCESS",JOINED_ROOM:"JOINED_ROOM",OUT_ROOM:"OUT_ROOM",UPDATE_ROOM:"UPDATE_ROOM",JOINED_GAME:"JOINED_GAME",UPDATE_BOARD:"UPDATE_BOARD",FINISH:"FINISH"},me={Board:{ROW:8,COL:8,Cell:{EMPTY:null,WHITE:1,BLACK:2}},Status:{EMPTY:0,AVAILABLE:1,PLAYING:2}},be=se,pe=ue,fe=Object(_.a)(re=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(T.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).submitModalName=function(e){le.emit(pe.LOG_IN,e),le.on(be.LOG_IN_SUCCESS,function(e){F.submitModalName(e)})},r}return Object(B.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return R.a.createElement(H.a,{title:"\u0110i\u1ec1n t\xean c\u1ee7a b\u1ea1n",visible:F.visibleModalName,footer:null,closable:!1},R.a.createElement($,{onSubmit:this.submitModalName},R.a.createElement(te,{name:"name",suffixClear:!0,placeholder:"Nh\u1eadp t\xean c\u1ee7a b\u1ea1n",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean c\u1ee7a b\u1ea1n!"}]}),R.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},R.a.createElement(ie,{type:"primary",htmlType:"submit"},"\u0110\u1ed3ng \xfd"))))}}]),t}(k.Component))||re,he=r(304),de=r(298),Oe=r(299),ye=se,ve=ue,je=Object(_.a)(ne=function(e){function t(){var e,r;Object(A.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(T.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).joinRoom=function(e){console.log(e),le.emit(ve.JOIN_ROOM,{roomId:e.id})},r.countPlayer=function(e){var t=0;return V(e.playerWhite)||t++,V(e.playerBlack)||t++,t},r.renderRoom=function(e){var t=r.countPlayer(e);return R.a.createElement(de.a,{span:4},R.a.createElement("div",{className:"room",onClick:function(){2!=e.status&&r.joinRoom(e)}},R.a.createElement("div",{className:"room-empty "+"room-".concat(e.status,"-user")},R.a.createElement("div",{className:"text"},t,"/2")),R.a.createElement("div",{className:"room-name"},"Ph\xf2ng ",e.id)))},r}return Object(B.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){le.on(ye.UPDATE_ROOM,function(e){F.updateRoom(e)}),le.on(ye.JOINED_ROOM,function(e){F.updateRoom(e),F.setCurrentRoom(e)})}},{key:"render",value:function(){var e=this;return R.a.createElement("div",null,R.a.createElement(Oe.a,{gutter:24},F.roomsStore.map(function(t,r){return e.renderRoom(t)})))}}]),t}(k.Component))||ne,ge=r(144);function Ee(e){return void 0===e}function Ce(e){return null==e}var we=se,Ne=ue,ke=me,Re=[-1,-1,-1,1,1,1,0,0],Ie=[-1,0,1,-1,0,1,-1,1];function xe(e,t,r,n,a,o,i){for(var c=0,l=n+o,u=a+i;;){if(!(0<=l&&l<8&&0<=u&&u<8))return!1;if(e[l][u]!=r){if(e[l][u]==t)break;return!1}c++,l+=o,u+=i}return c>0}var Ae,Se=Object(_.a)(ae=function(e){function t(e){var r;return Object(A.a)(this,t),(r=Object(T.a)(this,Object(M.a)(t).call(this,e))).onClickCell=function(e,t,r){F.getCurrentRoom.board[e][t]=F.player.chessman,r.forEach(function(r){!function(e,t,r,n,a,o,i){console.log(o+",",i);for(var c=n+o,l=a+i;;){if(!(0<=c&&c<8&&0<=l&&l<8))return;if(e[c][l]!=r){if(e[c][l]==t)break;return}console.log(e),e[c][l]=t,c+=o,l+=i}}(F.getCurrentRoom.board,F.player.chessman,F.partner.chessman,e,t,r.xx,r.yy)}),le.emit(Ne.TICK,F.getCurrentRoom.board)},r.createFences=function(){var e=function e(t){if(!Ee(t))return Ce(t)?null:t.slice&&Array.isArray(t.slice())?t.map(function(t){return e(t)}):"object"===typeof t?Object.entries(t).reduce(function(t,r){var n=Object(ge.a)(r,2),a=n[0],o=n[1];return Object(L.a)({},t,Object(W.a)({},a,e(o)))},{}):t}(F.getCurrentRoom.board);console.log(e);for(var t=0;t<8;t++)for(var r=0;r<8;r++)if(1==e[t][r]||2==e[t][r])for(var n=0;n<8;n++)0<=t+Re[n]&&t+Re[n]<8&&0<=r+Ie[n]&&r+Ie[n]<8&&!e[t+Re[n]][r+Ie[n]]&&(e[t+Re[n]][r+Ie[n]]=-1);return e},r.isAvailableMove=function(e,t,r){var n,a=new Array(8).fill(null).map(function(){return new Array(8)});n=1==r?2:1;for(var o=0;o<8;o++)for(var i=0;i<8;i++)if(-1==e[o][i])for(var c=0;c<8;c++){xe(t,r,n,o,i,Re[c],Ie[c])&&(e[o][i]=-2,void 0==a[o][i]&&(a[o][i]=[]),a[o][i].push({xx:Re[c],yy:Ie[c]}))}return a},r.renderBoard=function(){var e=r.createFences(),t=r.isAvailableMove(e,F.getCurrentRoom.board,F.player.chessman);return console.log(F.player.chessman),R.a.createElement("div",{className:"board-game"},F.getCurrentRoom.board.map(function(e,n){return R.a.createElement("div",{className:"board-row",key:n},e.map(function(e,a){return R.a.createElement("div",{className:"cell-game",key:a,onClick:function(){t[n][a]&&F.yourTurn&&r.onClickCell(n,a,t[n][a])}},e==ke.Board.Cell.BLACK?R.a.createElement("div",{className:"dot-black"}):e==ke.Board.Cell.WHITE?R.a.createElement("div",{className:"dot-white"}):R.a.createElement("div",{className:t[n][a]&&F.yourTurn?F.player.chessman==ke.Board.Cell.BLACK?"hover-black":"hover-white":"not-allowed"}))}))}))},r}return Object(B.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){le.on(we.JOINED_GAME,function(e){F.updateRoom(e)}),le.on(we.UPDATE_BOARD,function(e){F.updateRoom(e)})}},{key:"render",value:function(){return F.getCurrentRoom.status==ke.Status.PLAYING?this.renderBoard():R.a.createElement("div",{className:"waiting-partner"},"\u0110ang \u0111\u1ee3i \u0111\u1ed1i th\u1ee7...")}}]),t}(k.Component))||ae,Te=r(300),Me=me;function Be(e,t){var r=0;return e.forEach(function(e){e.forEach(function(e){e==t&&r++})}),r}var _e,De=Object(_.a)(Ae=function(e){function t(){return Object(A.a)(this,t),Object(T.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=F.userStore;return R.a.createElement("div",{style:{padding:"20px 5px",display:"flex",alignItems:"center",flexDirection:"column"}},R.a.createElement(Te.a,{size:100,icon:"user"}),R.a.createElement("div",{style:{marginTop:20}},"Xin ch\xe0o,"),R.a.createElement("div",{style:{fontWeight:"bold"}},e.name),R.a.createElement("div",{style:{color:"#989898"}},e.username),R.a.createElement("div",{style:{marginBottom:"20px"}}),F.player&&F.partner&&R.a.createElement("div",{className:"board-score"},F.player&&R.a.createElement("div",{style:{marginBottom:"30px"}},R.a.createElement("div",{className:"name"},"B\u1ea1n"),R.a.createElement("div",{className:"container-score"},R.a.createElement("div",{className:F.player.chessman==Me.Board.Cell.WHITE?"dot-white":"dot-black"}),R.a.createElement("div",{className:"score"},"x ",Be(F.getCurrentRoom.board,F.player.chessman)))),F.partner&&R.a.createElement("div",{style:{marginBottom:"30px"}},R.a.createElement("div",{className:"name"},F.partner.name),R.a.createElement("div",{style:{color:"#ececec"}},F.partner.username),R.a.createElement("div",{className:"container-score"},R.a.createElement("div",{className:F.partner.chessman==Me.Board.Cell.WHITE?"dot-white":"dot-black"}),R.a.createElement("div",{className:"score"},"x ",Be(F.getCurrentRoom.board,F.partner.chessman)))),F.yourTurn?R.a.createElement("div",{className:"name"},"L\u01b0\u1ee3t b\u1ea1n"):R.a.createElement("div",{className:"name"},"L\u01b0\u1ee3t \u0111\u1ed1i th\u1ee7")))}}]),t}(k.Component))||Ae,ze=he.a.Header,Pe=he.a.Sider,We=he.a.Content,Le=Object(_.a)(_e=function(e){function t(){return Object(A.a)(this,t),Object(T.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){F.userStore;return R.a.createElement("div",null,R.a.createElement(fe,null),R.a.createElement(he.a,{className:"layout"},R.a.createElement(ze,null,R.a.createElement("div",{style:{color:"#fff",fontSize:"22px",fontWeight:"bold",textAlign:"center"}},"Ch\u1ecdn ph\xf2ng")),R.a.createElement(he.a,null,R.a.createElement(Pe,{width:200,style:{background:"#fff"}},R.a.createElement(De,null)),R.a.createElement(We,{style:{background:"#e2e2e2",padding:24,margin:0,minWidth:"800px",minHeight:"calc(100vh - 64px)"}},R.a.createElement("div",{style:{background:"#fff",width:"100%",height:"100%",padding:24,borderRadius:"10px",display:"flex",justifyContent:"center",alignItems:"center"}},"choose room"==F.status?R.a.createElement(je,null):R.a.createElement(Se,null))))))}}]),t}(k.Component))||_e;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));x.a.render(R.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,2,1]]]);
//# sourceMappingURL=main.5e3a6757.chunk.js.map